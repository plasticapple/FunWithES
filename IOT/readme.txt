test cert generated by following steps (from: http://www.steves-internet-guide.com/mosquitto-tls/)


1.create a key pair for the CA

openssl genrsa -des3 -out ca.key 2048


2.create CA certificate out of previosly created key:

openssl req -new -x509 -days 1826 -key ca.key -out ca.crt


3.create new certifocate key pair :

openssl genrsa -out server.key 2048

4.create new certificate from the key:

openssl req -new -out server.csr -key server.key

5.use CA key to sign newly created certificate will create .crt file

openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt -days 360


6.creating copy of crt certificate in PEM format:

openssl x509 -in server.crt -out server.pem -outform PEM


7.making pfx for windows machine:

openssl pkcs12 -export -out cert.pfx -inkey ca.key -in server.crt  -in ca.crt


changing mosquitto configuration in # certificate based SSL/TLS support

cafile c:\mozzy\certs\ca.crt
keyfile c:\mozzy\cert\server.key
certfile c:\mozzy\certs\server.crt
tls_version tlsv1

also change port to 8883
